{"version":3,"sources":["admin/sv-wc-payment-gateway-admin-order.coffee"],"names":["jQuery","$","accounting","ref","ref1","ref2","ref3","submitCapture","sv_wc_payment_gateway_admin_order","woocommerce_admin","woocommerce_admin_meta_boxes","window","sv_wc_payment_gateway_admin_order_add_capture_events","length","addClass","appendTo","on","e","preventDefault","hasClass","slideDown","not","slideUp","total","unformat","val","mon_decimal_point","removeAttr","attr","text","formatMoney","symbol","currency_format_symbol","decimal","currency_format_decimal_sep","thousand","currency_format_thousand_sep","precision","currency_format_num_decimals","format","currency_format","amount","comment","data","confirm","capture_ays","block","message","overlayCSS","background","opacity","action","capture_action","nonce","capture_nonce","gateway_id","order_id","ajax","url","ajax_url","done","response","alert","success","location","reload","fail","capture_error","always","unblock","call"],"mappings":";CAAA,WASEA,OAAO,SAASC,GACd,aACIC,IAAAA,EAAYC,EAAKC,EAAMC,EAAMC,EAAMC,EAAeC,EAAmCC,EAAmBC,EAkFrGC,OAjFPH,EAAwF,OAAnDL,EAAMQ,OAAOH,mCAA6CL,EAAM,GACrGM,EAAyD,OAApCL,EAAOO,OAAOF,mBAA6BL,EAAO,GACvEM,EAA+E,OAA/CL,EAAOM,OAAOD,8BAAwCL,EAAO,GAC7FH,EAA2C,OAA7BI,EAAOK,OAAOT,YAAsBI,EAAO,GACzDK,OAAOC,qDAAuD,WAEvDX,IAAAA,EAAE,4FAA4FY,OA8B5FZ,OA3BPA,EAAE,0CAA0Ca,SAAS,qDAAqDC,SAAS,oCACnHd,EAAE,4BAA4Be,GAAG,QAAS,gDAAiD,SAASC,GAE9FhB,OADJgB,EAAEC,iBACEjB,EAAE,MAAMkB,SAAS,oBACnBlB,EAAE,6CAA6CmB,YAC/CnB,EAAE,gCAAgCoB,IAAI,6CAA6CC,UAC5ErB,EAAE,6BAA6BqB,WAE/Bf,MAGXN,EAAE,0CAA0Ce,GAAG,eAAgB,kBAAmB,SAASC,GACrFM,IAAAA,EAOGtB,OANPsB,EAAQrB,EAAWsB,SAASvB,EAAE,MAAMwB,MAAOhB,EAAkBiB,oBAE3DzB,EAAE,yBAAyB0B,WAAW,YAEtC1B,EAAE,yBAAyB2B,KAAK,WAAY,YAEvC3B,EAAE,kCAAkC4B,KAAK3B,EAAW4B,YAAYP,EAAO,CAC5EQ,OAAQrB,EAA6BsB,uBACrCC,QAASvB,EAA6BwB,4BACtCC,SAAUzB,EAA6B0B,6BACvCC,UAAW3B,EAA6B4B,6BACxCC,OAAQ7B,EAA6B8B,qBAGlCvC,EAAE,0CAA0Ce,GAAG,QAAS,kBAAmB,SAASC,GACrFwB,IAAAA,EAAQC,EAILnC,OAHPU,EAAEC,iBACFuB,EAASxC,EAAE,0DAA0DwB,MACrEiB,EAAUzC,EAAE,2DAA2DwB,MAChElB,EAAckC,EAAQC,MAGjCnC,EAAgB,WAASkC,IACnBE,EADmBF,EAAS,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAIC,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAE1CE,GAAAA,QAAQpC,EAAkCqC,aAgBrC5C,OAfPA,EAAE,4BAA4B6C,MAAM,CAClCC,QAAS,KACTC,WAAY,CACVC,WAAY,OACZC,QAAS,MAGbP,EAAO,CACLQ,OAAQ3C,EAAkC4C,eAC1CC,MAAO7C,EAAkC8C,cACzCC,WAAY/C,EAAkC+C,WAC9CC,SAAUhD,EAAkCgD,SAC5Cf,OAAQA,EACRC,QAASA,GAEJzC,EAAEwD,KAAK,CACZC,IAAKlD,EAAkCmD,SACvChB,KAAMA,IACLiB,KAAK,SAASC,GAIXA,GAHkB,MAAjBA,EAASlB,MAA2C,MAAzBkB,EAASlB,KAAKI,SAC5Ce,MAAMD,EAASlB,KAAKI,SAElBc,EAASE,QACJC,OAAAA,SAASC,WAEjBC,KAAK,WAECJ,OAAAA,MAAMtD,EAAkC2D,iBAC9CC,OAAO,WAEDnE,OAAAA,EAAE,4BAA4BoE,aAIpC1D,OAAOC,2DAGf0D,KAAK","file":"sv-wc-payment-gateway-admin-order.js","sourceRoot":"../js","sourcesContent":["(function() {\n  /*\n   WooCommerce SkyVerge Payment Gateway Framework Order Admin CoffeeScript\n   Version 5.0.0\n\n   Copyright (c) 2017-2024, SkyVerge, Inc.\n   Licensed under the GNU General Public License v3.0\n   http://www.gnu.org/licenses/gpl-3.0.html\n  */\n  jQuery(function($) {\n    \"use strict\";\n    var accounting, ref, ref1, ref2, ref3, submitCapture, sv_wc_payment_gateway_admin_order, woocommerce_admin, woocommerce_admin_meta_boxes;\n    sv_wc_payment_gateway_admin_order = (ref = window.sv_wc_payment_gateway_admin_order) != null ? ref : {};\n    woocommerce_admin = (ref1 = window.woocommerce_admin) != null ? ref1 : {};\n    woocommerce_admin_meta_boxes = (ref2 = window.woocommerce_admin_meta_boxes) != null ? ref2 : {};\n    accounting = (ref3 = window.accounting) != null ? ref3 : {};\n    window.sv_wc_payment_gateway_admin_order_add_capture_events = function() {\n      // prevent the events to be attached again\n      if (($('.sv-wc-payment-gateway-partial-capture.sv-wc-payment-gateway-partial-capture-with-events').length)) {\n        return;\n      }\n      $('.sv-wc-payment-gateway-partial-capture').addClass('sv-wc-payment-gateway-partial-capture-with-events').appendTo('#woocommerce-order-items .inside');\n      $('#woocommerce-order-items').on('click', '.sv-wc-payment-gateway-capture:not(.disabled)', function(e) {\n        e.preventDefault();\n        if ($(this).hasClass('partial-capture')) {\n          $('div.sv-wc-payment-gateway-partial-capture').slideDown();\n          $('div.wc-order-data-row-toggle').not('div.sv-wc-payment-gateway-partial-capture').slideUp();\n          return $('div.wc-order-totals-items').slideUp();\n        } else {\n          return submitCapture();\n        }\n      });\n      $('.sv-wc-payment-gateway-partial-capture').on('change keyup', '#capture_amount', function(e) {\n        var total;\n        total = accounting.unformat($(this).val(), woocommerce_admin.mon_decimal_point);\n        if (total) {\n          $('button.capture-action').removeAttr('disabled');\n        } else {\n          $('button.capture-action').attr('disabled', 'disabled');\n        }\n        return $('button .capture-amount .amount').text(accounting.formatMoney(total, {\n          symbol: woocommerce_admin_meta_boxes.currency_format_symbol,\n          decimal: woocommerce_admin_meta_boxes.currency_format_decimal_sep,\n          thousand: woocommerce_admin_meta_boxes.currency_format_thousand_sep,\n          precision: woocommerce_admin_meta_boxes.currency_format_num_decimals,\n          format: woocommerce_admin_meta_boxes.currency_format\n        }));\n      });\n      return $('.sv-wc-payment-gateway-partial-capture').on('click', '.capture-action', function(e) {\n        var amount, comment;\n        e.preventDefault();\n        amount = $('.sv-wc-payment-gateway-partial-capture #capture_amount').val();\n        comment = $('.sv-wc-payment-gateway-partial-capture #capture_comment').val();\n        return submitCapture(amount, comment);\n      });\n    };\n    submitCapture = function(amount = '', comment = '') {\n      var data;\n      if (confirm(sv_wc_payment_gateway_admin_order.capture_ays)) {\n        $('#woocommerce-order-items').block({\n          message: null,\n          overlayCSS: {\n            background: '#fff',\n            opacity: 0.6\n          }\n        });\n        data = {\n          action: sv_wc_payment_gateway_admin_order.capture_action,\n          nonce: sv_wc_payment_gateway_admin_order.capture_nonce,\n          gateway_id: sv_wc_payment_gateway_admin_order.gateway_id,\n          order_id: sv_wc_payment_gateway_admin_order.order_id,\n          amount: amount,\n          comment: comment\n        };\n        return $.ajax({\n          url: sv_wc_payment_gateway_admin_order.ajax_url,\n          data: data\n        }).done(function(response) {\n          if ((response.data != null) && (response.data.message != null)) {\n            alert(response.data.message);\n          }\n          if (response.success) {\n            return location.reload();\n          }\n        }).fail(function() {\n          // connection error\n          return alert(sv_wc_payment_gateway_admin_order.capture_error);\n        }).always(function() {\n          // never leave the UI blocked\n          return $('#woocommerce-order-items').unblock();\n        });\n      }\n    };\n    return window.sv_wc_payment_gateway_admin_order_add_capture_events();\n  });\n\n}).call(this);\n"]}